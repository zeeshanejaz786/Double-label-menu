/* =====================================================
   DOUBLE LABEL MENU
   CSS-ONLY EXTENSION FOR NAVIGATION BLOCK
   ===================================================== */

:root {
  --dlm-scope: .wp-block-navigation;
  --dlm-chevron-color: #2E0F1E;
  --dlm-chevron-size: 8px;
  --dlm-chevron-offset: 25px;
  --dlm-breakpoint: 1280px;
}

/* -----------------------------------------------------
   STACKED LABELS
   ----------------------------------------------------- */

var(--dlm-scope) .nav-stack {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  line-height: 1.4;
  padding-right: var(--dlm-chevron-offset);
  position: relative;
}

/* Hide native WP arrow */
var(--dlm-scope) .wp-block-navigation__submenu-icon {
  display: none !important;
}

/* -----------------------------------------------------
   CHEVRON (CLOSED)
   ----------------------------------------------------- */

var(--dlm-scope)
.wp-block-navigation-item.has-child
> .wp-block-navigation-item__content
.nav-stack::after {
  content: "";
  position: absolute;
  right: 0;
  top: 20%;
  width: var(--dlm-chevron-size);
  height: var(--dlm-chevron-size);
  border-right: 2px solid var(--dlm-chevron-color);
  border-bottom: 2px solid var(--dlm-chevron-color);
  transform: translateY(-50%) rotate(45deg);
  transition: transform 0.25s ease;
  pointer-events: none;
}

/* -----------------------------------------------------
   CHEVRON (OPEN)
   ----------------------------------------------------- */

var(--dlm-scope)
.wp-block-navigation-item.has-child
> .wp-block-navigation-item__content[aria-expanded="true"]
.nav-stack::after {
  transform: translateY(-50%) rotate(-135deg);
}

/* -----------------------------------------------------
   DESKTOP DROPDOWNS
   ----------------------------------------------------- */

@media (min-width: calc(var(--dlm-breakpoint) + 1px)) {

  var(--dlm-scope)
  .wp-block-navigation-item.has-child {
    position: relative;
    overflow: visible;
  }

  var(--dlm-scope)
  .wp-block-navigation__submenu-container {
    display: none;
    position: absolute;
    top: 100%;
    right: 0;
    min-width: 250px;
    padding: 20px;
    background: #fff;
    z-index: 9999;
  }

  var(--dlm-scope)
  .wp-block-navigation-item.has-child:hover
  > .wp-block-navigation__submenu-container {
    display: block;
  }
}

/* -----------------------------------------------------
   MOBILE OVERLAY
   ----------------------------------------------------- */

@media (max-width: var(--dlm-breakpoint)) {

  var(--dlm-scope)
  .wp-block-navigation__submenu-container {
    display: none;
  }

  var(--dlm-scope)
  .wp-block-navigation-submenu__toggle[aria-expanded="true"]
  ~ .wp-block-navigation__submenu-container {
    display: block;
    margin: 12px 0 0 24px;
  }
}
